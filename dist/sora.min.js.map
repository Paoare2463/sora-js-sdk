{"version":3,"file":"sora.min.js","sources":["../packages/go-wasm/src/wasm_exec.js","../packages/e2ee/dist/sora_e2ee.mjs"],"sourcesContent":["// Copyright 2018 The Go Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style\n// license that can be found in the LICENSE file.\n\nexport default function () {\n\t(() => {\n\t\t// Map multiple JavaScript environments to a single common API,\n\t\t// preferring web standards over Node.js API.\n\t\t//\n\t\t// Environments considered:\n\t\t// - Browsers\n\t\t// - Node.js\n\t\t// - Electron\n\t\t// - Parcel\n\t\n\t\tif (typeof global !== \"undefined\") {\n\t\t\t// global already exists\n\t\t} else if (typeof window !== \"undefined\") {\n\t\t\twindow.global = window;\n\t\t} else if (typeof self !== \"undefined\") {\n\t\t\tself.global = self;\n\t\t} else {\n\t\t\tthrow new Error(\"cannot export Go (neither global, window nor self is defined)\");\n\t\t}\n\t\n\t\tif (!global.require && typeof require !== \"undefined\") {\n\t\t\tglobal.require = require;\n\t\t}\n\t\n\t\tif (!global.fs && global.require) {\n\t\t\tconst fs = require(\"fs\");\n\t\t\tif (Object.keys(fs) !== 0) {\n\t\t\t\tglobal.fs = fs;\n\t\t\t}\n\t\t}\n\t\n\t\tconst enosys = () => {\n\t\t\tconst err = new Error(\"not implemented\");\n\t\t\terr.code = \"ENOSYS\";\n\t\t\treturn err;\n\t\t};\n\t\n\t\tif (!global.fs) {\n\t\t\tlet outputBuf = \"\";\n\t\t\tglobal.fs = {\n\t\t\t\tconstants: { O_WRONLY: -1, O_RDWR: -1, O_CREAT: -1, O_TRUNC: -1, O_APPEND: -1, O_EXCL: -1 }, // unused\n\t\t\t\twriteSync(fd, buf) {\n\t\t\t\t\toutputBuf += decoder.decode(buf);\n\t\t\t\t\tconst nl = outputBuf.lastIndexOf(\"\\n\");\n\t\t\t\t\tif (nl != -1) {\n\t\t\t\t\t\tconsole.log(outputBuf.substr(0, nl));\n\t\t\t\t\t\toutputBuf = outputBuf.substr(nl + 1);\n\t\t\t\t\t}\n\t\t\t\t\treturn buf.length;\n\t\t\t\t},\n\t\t\t\twrite(fd, buf, offset, length, position, callback) {\n\t\t\t\t\tif (offset !== 0 || length !== buf.length || position !== null) {\n\t\t\t\t\t\tcallback(enosys());\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst n = this.writeSync(fd, buf);\n\t\t\t\t\tcallback(null, n);\n\t\t\t\t},\n\t\t\t\tchmod(path, mode, callback) { callback(enosys()); },\n\t\t\t\tchown(path, uid, gid, callback) { callback(enosys()); },\n\t\t\t\tclose(fd, callback) { callback(enosys()); },\n\t\t\t\tfchmod(fd, mode, callback) { callback(enosys()); },\n\t\t\t\tfchown(fd, uid, gid, callback) { callback(enosys()); },\n\t\t\t\tfstat(fd, callback) { callback(enosys()); },\n\t\t\t\tfsync(fd, callback) { callback(null); },\n\t\t\t\tftruncate(fd, length, callback) { callback(enosys()); },\n\t\t\t\tlchown(path, uid, gid, callback) { callback(enosys()); },\n\t\t\t\tlink(path, link, callback) { callback(enosys()); },\n\t\t\t\tlstat(path, callback) { callback(enosys()); },\n\t\t\t\tmkdir(path, perm, callback) { callback(enosys()); },\n\t\t\t\topen(path, flags, mode, callback) { callback(enosys()); },\n\t\t\t\tread(fd, buffer, offset, length, position, callback) { callback(enosys()); },\n\t\t\t\treaddir(path, callback) { callback(enosys()); },\n\t\t\t\treadlink(path, callback) { callback(enosys()); },\n\t\t\t\trename(from, to, callback) { callback(enosys()); },\n\t\t\t\trmdir(path, callback) { callback(enosys()); },\n\t\t\t\tstat(path, callback) { callback(enosys()); },\n\t\t\t\tsymlink(path, link, callback) { callback(enosys()); },\n\t\t\t\ttruncate(path, length, callback) { callback(enosys()); },\n\t\t\t\tunlink(path, callback) { callback(enosys()); },\n\t\t\t\tutimes(path, atime, mtime, callback) { callback(enosys()); },\n\t\t\t};\n\t\t}\n\t\n\t\tif (!global.process) {\n\t\t\tglobal.process = {\n\t\t\t\tgetuid() { return -1; },\n\t\t\t\tgetgid() { return -1; },\n\t\t\t\tgeteuid() { return -1; },\n\t\t\t\tgetegid() { return -1; },\n\t\t\t\tgetgroups() { throw enosys(); },\n\t\t\t\tpid: -1,\n\t\t\t\tppid: -1,\n\t\t\t\tumask() { throw enosys(); },\n\t\t\t\tcwd() { throw enosys(); },\n\t\t\t\tchdir() { throw enosys(); },\n\t\t\t}\n\t\t}\n\t\n\t\tif (!global.crypto) {\n\t\t\tconst nodeCrypto = require(\"crypto\");\n\t\t\tglobal.crypto = {\n\t\t\t\tgetRandomValues(b) {\n\t\t\t\t\tnodeCrypto.randomFillSync(b);\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t\n\t\tif (!global.performance) {\n\t\t\tglobal.performance = {\n\t\t\t\tnow() {\n\t\t\t\t\tconst [sec, nsec] = process.hrtime();\n\t\t\t\t\treturn sec * 1000 + nsec / 1000000;\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t\n\t\tif (!global.TextEncoder) {\n\t\t\tglobal.TextEncoder = require(\"util\").TextEncoder;\n\t\t}\n\t\n\t\tif (!global.TextDecoder) {\n\t\t\tglobal.TextDecoder = require(\"util\").TextDecoder;\n\t\t}\n\t\n\t\t// End of polyfills for common API.\n\t\n\t\tconst encoder = new TextEncoder(\"utf-8\");\n\t\tconst decoder = new TextDecoder(\"utf-8\");\n\t\n\t\tglobal.Go = class {\n\t\t\tconstructor() {\n\t\t\t\tthis.argv = [\"js\"];\n\t\t\t\tthis.env = {};\n\t\t\t\tthis.exit = (code) => {\n\t\t\t\t\tif (code !== 0) {\n\t\t\t\t\t\tconsole.warn(\"exit code:\", code);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tthis._exitPromise = new Promise((resolve) => {\n\t\t\t\t\tthis._resolveExitPromise = resolve;\n\t\t\t\t});\n\t\t\t\tthis._pendingEvent = null;\n\t\t\t\tthis._scheduledTimeouts = new Map();\n\t\t\t\tthis._nextCallbackTimeoutID = 1;\n\t\n\t\t\t\tconst setInt64 = (addr, v) => {\n\t\t\t\t\tthis.mem.setUint32(addr + 0, v, true);\n\t\t\t\t\tthis.mem.setUint32(addr + 4, Math.floor(v / 4294967296), true);\n\t\t\t\t}\n\t\n\t\t\t\tconst getInt64 = (addr) => {\n\t\t\t\t\tconst low = this.mem.getUint32(addr + 0, true);\n\t\t\t\t\tconst high = this.mem.getInt32(addr + 4, true);\n\t\t\t\t\treturn low + high * 4294967296;\n\t\t\t\t}\n\t\n\t\t\t\tconst loadValue = (addr) => {\n\t\t\t\t\tconst f = this.mem.getFloat64(addr, true);\n\t\t\t\t\tif (f === 0) {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t\tif (!isNaN(f)) {\n\t\t\t\t\t\treturn f;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tconst id = this.mem.getUint32(addr, true);\n\t\t\t\t\treturn this._values[id];\n\t\t\t\t}\n\t\n\t\t\t\tconst storeValue = (addr, v) => {\n\t\t\t\t\tconst nanHead = 0x7FF80000;\n\t\n\t\t\t\t\tif (typeof v === \"number\" && v !== 0) {\n\t\t\t\t\t\tif (isNaN(v)) {\n\t\t\t\t\t\t\tthis.mem.setUint32(addr + 4, nanHead, true);\n\t\t\t\t\t\t\tthis.mem.setUint32(addr, 0, true);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.mem.setFloat64(addr, v, true);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (v === undefined) {\n\t\t\t\t\t\tthis.mem.setFloat64(addr, 0, true);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tlet id = this._ids.get(v);\n\t\t\t\t\tif (id === undefined) {\n\t\t\t\t\t\tid = this._idPool.pop();\n\t\t\t\t\t\tif (id === undefined) {\n\t\t\t\t\t\t\tid = this._values.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._values[id] = v;\n\t\t\t\t\t\tthis._goRefCounts[id] = 0;\n\t\t\t\t\t\tthis._ids.set(v, id);\n\t\t\t\t\t}\n\t\t\t\t\tthis._goRefCounts[id]++;\n\t\t\t\t\tlet typeFlag = 0;\n\t\t\t\t\tswitch (typeof v) {\n\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\tif (v !== null) {\n\t\t\t\t\t\t\t\ttypeFlag = 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\t\ttypeFlag = 2;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"symbol\":\n\t\t\t\t\t\t\ttypeFlag = 3;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\t\ttypeFlag = 4;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tthis.mem.setUint32(addr + 4, nanHead | typeFlag, true);\n\t\t\t\t\tthis.mem.setUint32(addr, id, true);\n\t\t\t\t}\n\t\n\t\t\t\tconst loadSlice = (addr) => {\n\t\t\t\t\tconst array = getInt64(addr + 0);\n\t\t\t\t\tconst len = getInt64(addr + 8);\n\t\t\t\t\treturn new Uint8Array(this._inst.exports.mem.buffer, array, len);\n\t\t\t\t}\n\t\n\t\t\t\tconst loadSliceOfValues = (addr) => {\n\t\t\t\t\tconst array = getInt64(addr + 0);\n\t\t\t\t\tconst len = getInt64(addr + 8);\n\t\t\t\t\tconst a = new Array(len);\n\t\t\t\t\tfor (let i = 0; i < len; i++) {\n\t\t\t\t\t\ta[i] = loadValue(array + i * 8);\n\t\t\t\t\t}\n\t\t\t\t\treturn a;\n\t\t\t\t}\n\t\n\t\t\t\tconst loadString = (addr) => {\n\t\t\t\t\tconst saddr = getInt64(addr + 0);\n\t\t\t\t\tconst len = getInt64(addr + 8);\n\t\t\t\t\treturn decoder.decode(new DataView(this._inst.exports.mem.buffer, saddr, len));\n\t\t\t\t}\n\t\n\t\t\t\tconst timeOrigin = Date.now() - performance.now();\n\t\t\t\tthis.importObject = {\n\t\t\t\t\tgo: {\n\t\t\t\t\t\t// Go's SP does not change as long as no Go code is running. Some operations (e.g. calls, getters and setters)\n\t\t\t\t\t\t// may synchronously trigger a Go event handler. This makes Go code get executed in the middle of the imported\n\t\t\t\t\t\t// function. A goroutine can switch to a new stack if the current stack is too small (see morestack function).\n\t\t\t\t\t\t// This changes the SP, thus we have to update the SP used by the imported function.\n\t\n\t\t\t\t\t\t// func wasmExit(code int32)\n\t\t\t\t\t\t\"runtime.wasmExit\": (sp) => {\n\t\t\t\t\t\t\tconst code = this.mem.getInt32(sp + 8, true);\n\t\t\t\t\t\t\tthis.exited = true;\n\t\t\t\t\t\t\tdelete this._inst;\n\t\t\t\t\t\t\tdelete this._values;\n\t\t\t\t\t\t\tdelete this._goRefCounts;\n\t\t\t\t\t\t\tdelete this._ids;\n\t\t\t\t\t\t\tdelete this._idPool;\n\t\t\t\t\t\t\tthis.exit(code);\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// func wasmWrite(fd uintptr, p unsafe.Pointer, n int32)\n\t\t\t\t\t\t\"runtime.wasmWrite\": (sp) => {\n\t\t\t\t\t\t\tconst fd = getInt64(sp + 8);\n\t\t\t\t\t\t\tconst p = getInt64(sp + 16);\n\t\t\t\t\t\t\tconst n = this.mem.getInt32(sp + 24, true);\n\t\t\t\t\t\t\tfs.writeSync(fd, new Uint8Array(this._inst.exports.mem.buffer, p, n));\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// func resetMemoryDataView()\n\t\t\t\t\t\t\"runtime.resetMemoryDataView\": (sp) => {\n\t\t\t\t\t\t\tthis.mem = new DataView(this._inst.exports.mem.buffer);\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// func nanotime1() int64\n\t\t\t\t\t\t\"runtime.nanotime1\": (sp) => {\n\t\t\t\t\t\t\tsetInt64(sp + 8, (timeOrigin + performance.now()) * 1000000);\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// func walltime1() (sec int64, nsec int32)\n\t\t\t\t\t\t\"runtime.walltime1\": (sp) => {\n\t\t\t\t\t\t\tconst msec = (new Date).getTime();\n\t\t\t\t\t\t\tsetInt64(sp + 8, msec / 1000);\n\t\t\t\t\t\t\tthis.mem.setInt32(sp + 16, (msec % 1000) * 1000000, true);\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// func scheduleTimeoutEvent(delay int64) int32\n\t\t\t\t\t\t\"runtime.scheduleTimeoutEvent\": (sp) => {\n\t\t\t\t\t\t\tconst id = this._nextCallbackTimeoutID;\n\t\t\t\t\t\t\tthis._nextCallbackTimeoutID++;\n\t\t\t\t\t\t\tthis._scheduledTimeouts.set(id, setTimeout(\n\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\tthis._resume();\n\t\t\t\t\t\t\t\t\twhile (this._scheduledTimeouts.has(id)) {\n\t\t\t\t\t\t\t\t\t\t// for some reason Go failed to register the timeout event, log and try again\n\t\t\t\t\t\t\t\t\t\t// (temporary workaround for https://github.com/golang/go/issues/28975)\n\t\t\t\t\t\t\t\t\t\tconsole.warn(\"scheduleTimeoutEvent: missed timeout event\");\n\t\t\t\t\t\t\t\t\t\tthis._resume();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tgetInt64(sp + 8) + 1, // setTimeout has been seen to fire up to 1 millisecond early\n\t\t\t\t\t\t\t));\n\t\t\t\t\t\t\tthis.mem.setInt32(sp + 16, id, true);\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// func clearTimeoutEvent(id int32)\n\t\t\t\t\t\t\"runtime.clearTimeoutEvent\": (sp) => {\n\t\t\t\t\t\t\tconst id = this.mem.getInt32(sp + 8, true);\n\t\t\t\t\t\t\tclearTimeout(this._scheduledTimeouts.get(id));\n\t\t\t\t\t\t\tthis._scheduledTimeouts.delete(id);\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// func getRandomData(r []byte)\n\t\t\t\t\t\t\"runtime.getRandomData\": (sp) => {\n\t\t\t\t\t\t\tcrypto.getRandomValues(loadSlice(sp + 8));\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// func finalizeRef(v ref)\n\t\t\t\t\t\t\"syscall/js.finalizeRef\": (sp) => {\n\t\t\t\t\t\t\tconst id = this.mem.getUint32(sp + 8, true);\n\t\t\t\t\t\t\tthis._goRefCounts[id]--;\n\t\t\t\t\t\t\tif (this._goRefCounts[id] === 0) {\n\t\t\t\t\t\t\t\tconst v = this._values[id];\n\t\t\t\t\t\t\t\tthis._values[id] = null;\n\t\t\t\t\t\t\t\tthis._ids.delete(v);\n\t\t\t\t\t\t\t\tthis._idPool.push(id);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// func stringVal(value string) ref\n\t\t\t\t\t\t\"syscall/js.stringVal\": (sp) => {\n\t\t\t\t\t\t\tstoreValue(sp + 24, loadString(sp + 8));\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// func valueGet(v ref, p string) ref\n\t\t\t\t\t\t\"syscall/js.valueGet\": (sp) => {\n\t\t\t\t\t\t\tconst result = Reflect.get(loadValue(sp + 8), loadString(sp + 16));\n\t\t\t\t\t\t\tsp = this._inst.exports.getsp(); // see comment above\n\t\t\t\t\t\t\tstoreValue(sp + 32, result);\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// func valueSet(v ref, p string, x ref)\n\t\t\t\t\t\t\"syscall/js.valueSet\": (sp) => {\n\t\t\t\t\t\t\tReflect.set(loadValue(sp + 8), loadString(sp + 16), loadValue(sp + 32));\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// func valueDelete(v ref, p string)\n\t\t\t\t\t\t\"syscall/js.valueDelete\": (sp) => {\n\t\t\t\t\t\t\tReflect.deleteProperty(loadValue(sp + 8), loadString(sp + 16));\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// func valueIndex(v ref, i int) ref\n\t\t\t\t\t\t\"syscall/js.valueIndex\": (sp) => {\n\t\t\t\t\t\t\tstoreValue(sp + 24, Reflect.get(loadValue(sp + 8), getInt64(sp + 16)));\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// valueSetIndex(v ref, i int, x ref)\n\t\t\t\t\t\t\"syscall/js.valueSetIndex\": (sp) => {\n\t\t\t\t\t\t\tReflect.set(loadValue(sp + 8), getInt64(sp + 16), loadValue(sp + 24));\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// func valueCall(v ref, m string, args []ref) (ref, bool)\n\t\t\t\t\t\t\"syscall/js.valueCall\": (sp) => {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tconst v = loadValue(sp + 8);\n\t\t\t\t\t\t\t\tconst m = Reflect.get(v, loadString(sp + 16));\n\t\t\t\t\t\t\t\tconst args = loadSliceOfValues(sp + 32);\n\t\t\t\t\t\t\t\tconst result = Reflect.apply(m, v, args);\n\t\t\t\t\t\t\t\tsp = this._inst.exports.getsp(); // see comment above\n\t\t\t\t\t\t\t\tstoreValue(sp + 56, result);\n\t\t\t\t\t\t\t\tthis.mem.setUint8(sp + 64, 1);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\tstoreValue(sp + 56, err);\n\t\t\t\t\t\t\t\tthis.mem.setUint8(sp + 64, 0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// func valueInvoke(v ref, args []ref) (ref, bool)\n\t\t\t\t\t\t\"syscall/js.valueInvoke\": (sp) => {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tconst v = loadValue(sp + 8);\n\t\t\t\t\t\t\t\tconst args = loadSliceOfValues(sp + 16);\n\t\t\t\t\t\t\t\tconst result = Reflect.apply(v, undefined, args);\n\t\t\t\t\t\t\t\tsp = this._inst.exports.getsp(); // see comment above\n\t\t\t\t\t\t\t\tstoreValue(sp + 40, result);\n\t\t\t\t\t\t\t\tthis.mem.setUint8(sp + 48, 1);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\tstoreValue(sp + 40, err);\n\t\t\t\t\t\t\t\tthis.mem.setUint8(sp + 48, 0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// func valueNew(v ref, args []ref) (ref, bool)\n\t\t\t\t\t\t\"syscall/js.valueNew\": (sp) => {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tconst v = loadValue(sp + 8);\n\t\t\t\t\t\t\t\tconst args = loadSliceOfValues(sp + 16);\n\t\t\t\t\t\t\t\tconst result = Reflect.construct(v, args);\n\t\t\t\t\t\t\t\tsp = this._inst.exports.getsp(); // see comment above\n\t\t\t\t\t\t\t\tstoreValue(sp + 40, result);\n\t\t\t\t\t\t\t\tthis.mem.setUint8(sp + 48, 1);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\tstoreValue(sp + 40, err);\n\t\t\t\t\t\t\t\tthis.mem.setUint8(sp + 48, 0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// func valueLength(v ref) int\n\t\t\t\t\t\t\"syscall/js.valueLength\": (sp) => {\n\t\t\t\t\t\t\tsetInt64(sp + 16, parseInt(loadValue(sp + 8).length));\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// valuePrepareString(v ref) (ref, int)\n\t\t\t\t\t\t\"syscall/js.valuePrepareString\": (sp) => {\n\t\t\t\t\t\t\tconst str = encoder.encode(String(loadValue(sp + 8)));\n\t\t\t\t\t\t\tstoreValue(sp + 16, str);\n\t\t\t\t\t\t\tsetInt64(sp + 24, str.length);\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// valueLoadString(v ref, b []byte)\n\t\t\t\t\t\t\"syscall/js.valueLoadString\": (sp) => {\n\t\t\t\t\t\t\tconst str = loadValue(sp + 8);\n\t\t\t\t\t\t\tloadSlice(sp + 16).set(str);\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// func valueInstanceOf(v ref, t ref) bool\n\t\t\t\t\t\t\"syscall/js.valueInstanceOf\": (sp) => {\n\t\t\t\t\t\t\tthis.mem.setUint8(sp + 24, (loadValue(sp + 8) instanceof loadValue(sp + 16)) ? 1 : 0);\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// func copyBytesToGo(dst []byte, src ref) (int, bool)\n\t\t\t\t\t\t\"syscall/js.copyBytesToGo\": (sp) => {\n\t\t\t\t\t\t\tconst dst = loadSlice(sp + 8);\n\t\t\t\t\t\t\tconst src = loadValue(sp + 32);\n\t\t\t\t\t\t\tif (!(src instanceof Uint8Array || src instanceof Uint8ClampedArray)) {\n\t\t\t\t\t\t\t\tthis.mem.setUint8(sp + 48, 0);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst toCopy = src.subarray(0, dst.length);\n\t\t\t\t\t\t\tdst.set(toCopy);\n\t\t\t\t\t\t\tsetInt64(sp + 40, toCopy.length);\n\t\t\t\t\t\t\tthis.mem.setUint8(sp + 48, 1);\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t// func copyBytesToJS(dst ref, src []byte) (int, bool)\n\t\t\t\t\t\t\"syscall/js.copyBytesToJS\": (sp) => {\n\t\t\t\t\t\t\tconst dst = loadValue(sp + 8);\n\t\t\t\t\t\t\tconst src = loadSlice(sp + 16);\n\t\t\t\t\t\t\tif (!(dst instanceof Uint8Array || dst instanceof Uint8ClampedArray)) {\n\t\t\t\t\t\t\t\tthis.mem.setUint8(sp + 48, 0);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst toCopy = src.subarray(0, dst.length);\n\t\t\t\t\t\t\tdst.set(toCopy);\n\t\t\t\t\t\t\tsetInt64(sp + 40, toCopy.length);\n\t\t\t\t\t\t\tthis.mem.setUint8(sp + 48, 1);\n\t\t\t\t\t\t},\n\t\n\t\t\t\t\t\t\"debug\": (value) => {\n\t\t\t\t\t\t\tconsole.log(value);\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\n\t\t\tasync run(instance) {\n\t\t\t\tthis._inst = instance;\n\t\t\t\tthis.mem = new DataView(this._inst.exports.mem.buffer);\n\t\t\t\tthis._values = [ // JS values that Go currently has references to, indexed by reference id\n\t\t\t\t\tNaN,\n\t\t\t\t\t0,\n\t\t\t\t\tnull,\n\t\t\t\t\ttrue,\n\t\t\t\t\tfalse,\n\t\t\t\t\tglobal,\n\t\t\t\t\tthis,\n\t\t\t\t];\n\t\t\t\tthis._goRefCounts = new Array(this._values.length).fill(Infinity); // number of references that Go has to a JS value, indexed by reference id\n\t\t\t\tthis._ids = new Map([ // mapping from JS values to reference ids\n\t\t\t\t\t[0, 1],\n\t\t\t\t\t[null, 2],\n\t\t\t\t\t[true, 3],\n\t\t\t\t\t[false, 4],\n\t\t\t\t\t[global, 5],\n\t\t\t\t\t[this, 6],\n\t\t\t\t]);\n\t\t\t\tthis._idPool = [];   // unused ids that have been garbage collected\n\t\t\t\tthis.exited = false; // whether the Go program has exited\n\t\n\t\t\t\t// Pass command line arguments and environment variables to WebAssembly by writing them to the linear memory.\n\t\t\t\tlet offset = 4096;\n\t\n\t\t\t\tconst strPtr = (str) => {\n\t\t\t\t\tconst ptr = offset;\n\t\t\t\t\tconst bytes = encoder.encode(str + \"\\0\");\n\t\t\t\t\tnew Uint8Array(this.mem.buffer, offset, bytes.length).set(bytes);\n\t\t\t\t\toffset += bytes.length;\n\t\t\t\t\tif (offset % 8 !== 0) {\n\t\t\t\t\t\toffset += 8 - (offset % 8);\n\t\t\t\t\t}\n\t\t\t\t\treturn ptr;\n\t\t\t\t};\n\t\n\t\t\t\tconst argc = this.argv.length;\n\t\n\t\t\t\tconst argvPtrs = [];\n\t\t\t\tthis.argv.forEach((arg) => {\n\t\t\t\t\targvPtrs.push(strPtr(arg));\n\t\t\t\t});\n\t\t\t\targvPtrs.push(0);\n\t\n\t\t\t\tconst keys = Object.keys(this.env).sort();\n\t\t\t\tkeys.forEach((key) => {\n\t\t\t\t\targvPtrs.push(strPtr(`${key}=${this.env[key]}`));\n\t\t\t\t});\n\t\t\t\targvPtrs.push(0);\n\t\n\t\t\t\tconst argv = offset;\n\t\t\t\targvPtrs.forEach((ptr) => {\n\t\t\t\t\tthis.mem.setUint32(offset, ptr, true);\n\t\t\t\t\tthis.mem.setUint32(offset + 4, 0, true);\n\t\t\t\t\toffset += 8;\n\t\t\t\t});\n\t\n\t\t\t\tthis._inst.exports.run(argc, argv);\n\t\t\t\tif (this.exited) {\n\t\t\t\t\tthis._resolveExitPromise();\n\t\t\t\t}\n\t\t\t\tawait this._exitPromise;\n\t\t\t}\n\t\n\t\t\t_resume() {\n\t\t\t\tif (this.exited) {\n\t\t\t\t\tthrow new Error(\"Go program has already exited\");\n\t\t\t\t}\n\t\t\t\tthis._inst.exports.resume();\n\t\t\t\tif (this.exited) {\n\t\t\t\t\tthis._resolveExitPromise();\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t_makeFuncWrapper(id) {\n\t\t\t\tconst go = this;\n\t\t\t\treturn function () {\n\t\t\t\t\tconst event = { id: id, this: this, args: arguments };\n\t\t\t\t\tgo._pendingEvent = event;\n\t\t\t\t\tgo._resume();\n\t\t\t\t\treturn event.result;\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\n\t\tif (\n\t\t\tglobal.require &&\n\t\t\tglobal.require.main === module &&\n\t\t\tglobal.process &&\n\t\t\tglobal.process.versions &&\n\t\t\t!global.process.versions.electron\n\t\t) {\n\t\t\tif (process.argv.length < 3) {\n\t\t\t\tconsole.error(\"usage: go_js_wasm_exec [wasm binary] [arguments]\");\n\t\t\t\tprocess.exit(1);\n\t\t\t}\n\t\n\t\t\tconst go = new Go();\n\t\t\tgo.argv = process.argv.slice(2);\n\t\t\tgo.env = Object.assign({ TMPDIR: require(\"os\").tmpdir() }, process.env);\n\t\t\tgo.exit = process.exit;\n\t\t\tWebAssembly.instantiate(fs.readFileSync(process.argv[2]), go.importObject).then((result) => {\n\t\t\t\tprocess.on(\"exit\", (code) => { // Node.js exits if no event handler is pending\n\t\t\t\t\tif (code === 0 && !go.exited) {\n\t\t\t\t\t\t// deadlock, make Go print error and stack traces\n\t\t\t\t\t\tgo._pendingEvent = { id: 0 };\n\t\t\t\t\t\tgo._resume();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn go.run(result.instance);\n\t\t\t}).catch((err) => {\n\t\t\t\tconsole.error(err);\n\t\t\t\tprocess.exit(1);\n\t\t\t});\n\t\t}\n\t})();\n}\n","/**\n * @sora/e2ee\n * WebRTC SFU Sora JavaScript E2EE Library\n * @version: 2021.1.0-canary.0\n * @author: Shiguredo Inc.\n * @license: Apache-2.0\n **/\n\nimport WasmExec from '@sora/go-wasm';\n\nconst WORKER_SCRIPT = \"InVzZSBzdHJpY3QiOwovKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnMgKi8KY29uc3QgY29ubmVjdGlvbklkTGVuZ3RoID0gMjY7CmZ1bmN0aW9uIGJ5dGVDb3VudChuKSB7CiAgICBpZiAobiA9PSAwKSB7CiAgICAgICAgcmV0dXJuIDE7CiAgICB9CiAgICAvLyBsb2cyNTYoeCkgPSBsb2coeCkgLyBsb2coMjU2KQogICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5sb2cobikgLyBNYXRoLmxvZygyICoqIDgpICsgMSk7Cn0KZnVuY3Rpb24gYXJyYXlCdWZmZXJUb051bWJlcihhcnJheUJ1ZmZlcikgewogICAgLy8gMzJiaXQg44G+44Gn44KS5oOz5a6aIChCaWdJbnQg44G444Gu5pu444GN5o+b44GI5pmC44Gr6KaB5L+u5q2jKQogICAgY29uc3QgbmV3QXJyYXlCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoVWludDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQpOwogICAgY29uc3QgbmV3RGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcobmV3QXJyYXlCdWZmZXIpOwogICAgY29uc3QgZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoYXJyYXlCdWZmZXIpOwogICAgY29uc3QgcGFkZGluZ0xlbmd0aCA9IFVpbnQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UIC0gZGF0YVZpZXcuYnl0ZUxlbmd0aDsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFkZGluZ0xlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgbmV3RGF0YVZpZXcuc2V0VWludDgoaSwgMCk7CiAgICB9CiAgICBmb3IgKGxldCBpID0gcGFkZGluZ0xlbmd0aCwgaiA9IDA7IGkgPCBVaW50MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVDsgaSArPSAxLCBqICs9IDEpIHsKICAgICAgICBuZXdEYXRhVmlldy5zZXRVaW50OChpLCBkYXRhVmlldy5nZXRVaW50OChqKSk7CiAgICB9CiAgICByZXR1cm4gbmV3RGF0YVZpZXcuZ2V0VWludDMyKDApOwp9CmZ1bmN0aW9uIGVuY29kZVNGcmFtZUhlYWRlcihzLCBjb3VudCwga2V5SWQpIHsKICAgIC8vICAwIDEgMiAzIDQgNSA2IDcKICAgIC8vICstKy0rLSstKy0rLSstKy0rLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsKICAgIC8vIHxTfExFTiAgfDF8S0xFTiB8ICAgS0lELi4uIChsZW5ndGg9S0xFTikgICAgfCAgICBDVFIuLi4gKGxlbmd0aD1MRU4pICAgIHwKICAgIC8vICstKy0rLSstKy0rLSstKy0rLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsKICAgIC8vIFM6IDEgYml0CiAgICAvLyBMRU46IDMgYml0CiAgICAvLyBYOiAxIGJpdAogICAgLy8gS0xFTjogMyBiaXQKICAgIC8vIEtJRDogS0xFTiBieXRlCiAgICAvLyBDVFI6IExFTiBieXRlCiAgICAvLyBUT0RPOiBrZXlJZCAoS0lEKSDjgYwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsIDcgYnl0ZSDjgpLotoXjgYjjgabjgYTjgZ/loLTlkIjjga/jgqjjg6njg7zjgYvkvovlpJYKICAgIC8vIFRPRE86IGNvdW50IChDVFIpIOOBjCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiwgNyBieXRlIOOCkui2heOBiOOBpuOBhOOBn+WgtOWQiOOBr+OCqOODqeODvOOBi+S+i+WklgogICAgaWYgKG1heEtleUlkIDwga2V5SWQgfHwgbWF4Q291bnQgPCBjb3VudCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiRVhDRUVERUQtTUFYSU1VTS1CUk9BRENBU1RJTkctVElNRSIpOwogICAgfQogICAgY29uc3Qga2xlbiA9IGJ5dGVDb3VudChrZXlJZCk7CiAgICBjb25zdCBsZW4gPSBieXRlQ291bnQoY291bnQpOwogICAgY29uc3QgaGVhZGVyQnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDEgKyBrbGVuICsgbGVuKTsKICAgIGNvbnN0IGhlYWRlckRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGhlYWRlckJ1ZmZlcik7CiAgICAvLyBTLCBMRU4sIDEsIEtMRU4g44GnIDEgYnl0ZQogICAgaGVhZGVyRGF0YVZpZXcuc2V0VWludDgoMCwgKHMgPDwgNykgKyAobGVuIDw8IDQpICsgKDEgPDwgMykgKyBrbGVuKTsKICAgIGNvbnN0IGhlYWRlclVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheShoZWFkZXJCdWZmZXIpOwogICAgY29uc3Qga2V5SWRCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoVWludDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQpOwogICAgY29uc3Qga2V5SWREYXRhVmlldyA9IG5ldyBEYXRhVmlldyhrZXlJZEJ1ZmZlcik7CiAgICBrZXlJZERhdGFWaWV3LnNldFVpbnQzMigwLCBrZXlJZCk7CiAgICBjb25zdCBrZXlJZFVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheShrZXlJZEJ1ZmZlcik7CiAgICBoZWFkZXJVaW50OEFycmF5LnNldChrZXlJZFVpbnQ4QXJyYXkuc3ViYXJyYXkoVWludDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQgLSBrbGVuKSwgMSk7CiAgICBjb25zdCBjb3VudEJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihVaW50MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCk7CiAgICBjb25zdCBjb3VudERhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGNvdW50QnVmZmVyKTsKICAgIGNvdW50RGF0YVZpZXcuc2V0VWludDMyKDAsIGNvdW50KTsKICAgIGNvbnN0IGNvdW50VWludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KGNvdW50QnVmZmVyKTsKICAgIGhlYWRlclVpbnQ4QXJyYXkuc2V0KGNvdW50VWludDhBcnJheS5zdWJhcnJheShVaW50MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCAtIGxlbiksIGtsZW4gKyAxKTsKICAgIHJldHVybiBoZWFkZXJVaW50OEFycmF5Owp9CmZ1bmN0aW9uIHNwbGl0SGVhZGVyKHNmcmFtZSkgewogICAgY29uc3Qgc2ZyYW1lRGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoc2ZyYW1lKTsKICAgIGNvbnN0IGhlYWRlciA9IHNmcmFtZURhdGFWaWV3LmdldFVpbnQ4KDApOwogICAgY29uc3QgbGVuID0gKGhlYWRlciAmIDB4NzApID4+IDQ7CiAgICBjb25zdCBrbGVuID0gaGVhZGVyICYgMHgwNzsKICAgIGNvbnN0IHNmcmFtZUhlYWRlckxlbmd0aCA9IDEgKyBrbGVuICsgbGVuOwogICAgY29uc3Qgc2ZyYW1lSGVhZGVyID0gc2ZyYW1lLnNsaWNlKDAsIHNmcmFtZUhlYWRlckxlbmd0aCk7CiAgICBpZiAoc2ZyYW1lSGVhZGVyLmJ5dGVMZW5ndGggPCBzZnJhbWVIZWFkZXJMZW5ndGgpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlVORVhQRUNURUQtU0ZSQU1FLUxFTkdUSCIpOwogICAgfQogICAgY29uc3QgY29ubmVjdGlvbklkID0gc2ZyYW1lLnNsaWNlKHNmcmFtZUhlYWRlckxlbmd0aCwgc2ZyYW1lSGVhZGVyTGVuZ3RoICsgY29ubmVjdGlvbklkTGVuZ3RoKTsKICAgIGNvbnN0IGVuY3J5cHRlZEZyYW1lID0gc2ZyYW1lLnNsaWNlKHNmcmFtZUhlYWRlckxlbmd0aCArIGNvbm5lY3Rpb25JZExlbmd0aCwgc2ZyYW1lLmJ5dGVMZW5ndGgpOwogICAgcmV0dXJuIFtzZnJhbWVIZWFkZXIsIGNvbm5lY3Rpb25JZCwgZW5jcnlwdGVkRnJhbWVdOwp9CmZ1bmN0aW9uIHBhcnNlU0ZyYW1lSGVhZGVyKHNmcmFtZUhlYWRlcikgewogICAgY29uc3Qgc2ZyYW1lSGVhZGVyRGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoc2ZyYW1lSGVhZGVyKTsKICAgIGNvbnN0IGhlYWRlciA9IHNmcmFtZUhlYWRlckRhdGFWaWV3LmdldFVpbnQ4KDApOwogICAgY29uc3QgcyA9IChoZWFkZXIgJiAweDgwKSA+PiA3OwogICAgY29uc3QgbGVuID0gKGhlYWRlciAmIDB4NzApID4+IDQ7CiAgICBjb25zdCB4ID0gKGhlYWRlciAmIDB4MDgpID4+IDM7CiAgICBjb25zdCBrbGVuID0gaGVhZGVyICYgMHgwNzsKICAgIC8vIHggZmxhZwogICAgaWYgKHggIT09IDEpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlVORVhQRUNURUQtWC1GTEFHIik7CiAgICB9CiAgICBjb25zdCBoZWFkZXJMZW5ndGggPSAxICsga2xlbiArIGxlbjsKICAgIGlmIChzZnJhbWVIZWFkZXJEYXRhVmlldy5ieXRlTGVuZ3RoIDwgaGVhZGVyTGVuZ3RoKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJVTkVYUEVDVEVELVNGUkFNRS1IRUFERVItTEVOR1RIIik7CiAgICB9CiAgICBjb25zdCBrZXlJZEJ1ZmZlciA9IHNmcmFtZUhlYWRlci5zbGljZSgxLCAxICsga2xlbik7CiAgICBjb25zdCBrZXlJZCA9IGFycmF5QnVmZmVyVG9OdW1iZXIoa2V5SWRCdWZmZXIpOwogICAgY29uc3QgY291bnRCdWZmZXIgPSBzZnJhbWVIZWFkZXIuc2xpY2UoMSArIGtsZW4sIGhlYWRlckxlbmd0aCk7CiAgICBjb25zdCBjb3VudCA9IGFycmF5QnVmZmVyVG9OdW1iZXIoY291bnRCdWZmZXIpOwogICAgcmV0dXJuIFtzLCBjb3VudCwga2V5SWRdOwp9Ci8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC90cmlwbGUtc2xhc2gtcmVmZXJlbmNlLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnMgKi8KLy8vIDxyZWZlcmVuY2UgcGF0aD0iLi9zZnJhbWUudHMiLz4KLy8gVE9ETzog5omx44GG5pWw5YCk44GM5aSn44GN44GE566H5omA44Gn44GvIE51bWJlciDjgYvjgokgQmlnSW50IOOBq+e9ruOBjeaPm+OBiOOCiwovLyBUT0RPOiBCaWdJbnQg44Gr572u44GN5o+b44GI44KL6Zqb44Gr5aSJ5pu044GZ44KLCmNvbnN0IG1heEtleUlkID0gMiAqKiAzMjsKY29uc3QgbWF4Q291bnQgPSAyICoqIDMyOwpjb25zdCBzZWxmRGVyaXZlS2V5TWFwID0gbmV3IE1hcCgpOwpjb25zdCBjb3VudE1hcCA9IG5ldyBNYXAoKTsKY29uc3Qgd3JpdGVJVk1hcCA9IG5ldyBNYXAoKTsKY29uc3QgcmVtb3RlRGVyaXZlS2V5TWFwID0gbmV3IE1hcCgpOwpjb25zdCBsYXRlc3RSZW1vdGVLZXlJZE1hcCA9IG5ldyBNYXAoKTsKY29uc3QgbGl0dGxlRW5kaWFuID0gdHJ1ZTsKY29uc3QgYmlnRW5kaWFuID0gIWxpdHRsZUVuZGlhbjsKY29uc3QgdGV4dEVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTsKY29uc3QgdGV4dERlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTsKLy8gVlA4IOOBruOBvwovLyBUT0RPKG5ha2FpKTogVlA5IC8gQVYxIOOCguWwhuadpeeahOOBq+WvvuW/nOOCguiAg+OBiOOCiwpjb25zdCB1bmVuY3J5cHRlZEJ5dGVzID0gewogICAgLy8gSSDjg5Xjg6zjg7zjg6AKICAgIGtleTogMTAsCiAgICAvLyDpnZ4gSSDjg5Xjg6zjg7zjg6AKICAgIGRlbHRhOiAzLAogICAgLy8g44Kq44O844OH44Kj44KqCiAgICB1bmRlZmluZWQ6IDEsCn07CmZ1bmN0aW9uIGdldENvdW50KGNvbm5lY3Rpb25JZCkgewogICAgcmV0dXJuIGNvdW50TWFwLmdldChjb25uZWN0aW9uSWQpIHx8IDA7Cn0KZnVuY3Rpb24gc2V0Q291bnQoY29ubmVjdGlvbklkLCBjb3VudCkgewogICAgcmV0dXJuIGNvdW50TWFwLnNldChjb25uZWN0aW9uSWQsIGNvdW50KTsKfQpmdW5jdGlvbiBnZXRSZW1vdGVEZXJpdmVLZXkoY29ubmVjdGlvbklkLCBrZXlJZCkgewogICAgaWYgKCFyZW1vdGVEZXJpdmVLZXlNYXAuaGFzKGNvbm5lY3Rpb25JZCkpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlJFTU9URS1ERVJJVkVLRVktTUFQLU5PVC1GT1VORCIpOwogICAgfQogICAgY29uc3QgZGVyaXZlS2V5TWFwID0gcmVtb3RlRGVyaXZlS2V5TWFwLmdldChjb25uZWN0aW9uSWQpOwogICAgaWYgKCFkZXJpdmVLZXlNYXApIHsKICAgICAgICByZXR1cm47CiAgICB9CiAgICByZXR1cm4gZGVyaXZlS2V5TWFwLmdldChrZXlJZCk7Cn0KZnVuY3Rpb24gc2V0UmVtb3RlRGVyaXZlS2V5KGNvbm5lY3Rpb25JZCwga2V5SWQsIGRlcml2ZUtleSkgewogICAgbGV0IGRlcml2ZUtleU1hcCA9IHJlbW90ZURlcml2ZUtleU1hcC5nZXQoY29ubmVjdGlvbklkKTsKICAgIGlmICghZGVyaXZlS2V5TWFwKSB7CiAgICAgICAgZGVyaXZlS2V5TWFwID0gbmV3IE1hcCgpOwogICAgfQogICAgZGVyaXZlS2V5TWFwLnNldChrZXlJZCwgZGVyaXZlS2V5KTsKICAgIHJlbW90ZURlcml2ZUtleU1hcC5zZXQoY29ubmVjdGlvbklkLCBkZXJpdmVLZXlNYXApOwp9CmZ1bmN0aW9uIHNldExhdGVzdFJlbW90ZUtleUlkKGNvbm5lY3Rpb25JZCwga2V5SWQpIHsKICAgIGNvbnN0IGxhdGVzdFJlbW90ZUtleUlkID0gbGF0ZXN0UmVtb3RlS2V5SWRNYXAuZ2V0KGNvbm5lY3Rpb25JZCk7CiAgICBpZiAobGF0ZXN0UmVtb3RlS2V5SWQpIHsKICAgICAgICBpZiAobGF0ZXN0UmVtb3RlS2V5SWQgPCBrZXlJZCkgewogICAgICAgICAgICBsYXRlc3RSZW1vdGVLZXlJZE1hcC5zZXQoY29ubmVjdGlvbklkLCBrZXlJZCk7CiAgICAgICAgfQogICAgfQogICAgZWxzZSB7CiAgICAgICAgbGF0ZXN0UmVtb3RlS2V5SWRNYXAuc2V0KGNvbm5lY3Rpb25JZCwga2V5SWQpOwogICAgfQp9CmZ1bmN0aW9uIHJlbW92ZU9sZFJlbW90ZURlcml2ZUtleXMoKSB7CiAgICBsYXRlc3RSZW1vdGVLZXlJZE1hcC5mb3JFYWNoKChsYXRlc3RLZXlJZCwgY29ubmVjdGlvbklkKSA9PiB7CiAgICAgICAgY29uc3QgZGVyaXZlS2V5TWFwID0gcmVtb3RlRGVyaXZlS2V5TWFwLmdldChjb25uZWN0aW9uSWQpOwogICAgICAgIGlmIChkZXJpdmVLZXlNYXApIHsKICAgICAgICAgICAgZGVyaXZlS2V5TWFwLmZvckVhY2goKF8sIGtleUlkKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAobGF0ZXN0S2V5SWQgIT09IGtleUlkKSB7CiAgICAgICAgICAgICAgICAgICAgZGVyaXZlS2V5TWFwLmRlbGV0ZShrZXlJZCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0pOwp9CmZ1bmN0aW9uIHJlbW92ZURlcml2ZUtleShjb25uZWN0aW9uSWQpIHsKICAgIGxhdGVzdFJlbW90ZUtleUlkTWFwLmRlbGV0ZShjb25uZWN0aW9uSWQpOwogICAgcmVtb3RlRGVyaXZlS2V5TWFwLmRlbGV0ZShjb25uZWN0aW9uSWQpOwp9CmZ1bmN0aW9uIGdldExhdGVzdFNlbGZEZXJpdmVLZXkoKSB7CiAgICBjb25zdCBkZXJpdmVLZXkgPSBzZWxmRGVyaXZlS2V5TWFwLmdldCgibGF0ZXN0Iik7CiAgICBpZiAoIWRlcml2ZUtleSkgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiTEFURVNULVNFTEYtREVSSVZFS0VZLU5PVF9GT1VORCIpOwogICAgfQogICAgcmV0dXJuIGRlcml2ZUtleTsKfQpmdW5jdGlvbiBzZXRTZWxmRGVyaXZlS2V5KGNvbm5lY3Rpb25JZCwga2V5SWQsIGRlcml2ZUtleSkgewogICAgY29uc3QgY3VycmVudFNlbGZEZXJpdmVLZXkgPSBzZWxmRGVyaXZlS2V5TWFwLmdldCgibGF0ZXN0Iik7CiAgICBpZiAoY3VycmVudFNlbGZEZXJpdmVLZXkpIHsKICAgICAgICBpZiAoY3VycmVudFNlbGZEZXJpdmVLZXlbImtleUlkIl0gPCBrZXlJZCkgewogICAgICAgICAgICBjb25zdCBuZXh0U2VsZkRlcml2ZUtleSA9IHsgY29ubmVjdGlvbklkLCBrZXlJZCwgZGVyaXZlS2V5IH07CiAgICAgICAgICAgIHNlbGZEZXJpdmVLZXlNYXAuc2V0KCJsYXRlc3QiLCBuZXh0U2VsZkRlcml2ZUtleSk7CiAgICAgICAgfQogICAgfQogICAgZWxzZSB7CiAgICAgICAgY29uc3QgbmV4dFNlbGZEZXJpdmVLZXkgPSB7IGNvbm5lY3Rpb25JZCwga2V5SWQsIGRlcml2ZUtleSB9OwogICAgICAgIHNlbGZEZXJpdmVLZXlNYXAuc2V0KCJsYXRlc3QiLCBuZXh0U2VsZkRlcml2ZUtleSk7CiAgICB9Cn0KZnVuY3Rpb24gc2lsZW5jZUZyYW1lKGVuY29kZWRGcmFtZSkgewogICAgLy8gY29ubmVjdGlvbi5jcmVhdGVkLCByZWNlaXZlTWVzc2FnZSDlj5fkv6HliY3jga7loLTlkIgKICAgIGlmIChlbmNvZGVkRnJhbWUudHlwZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgLy8g6Z+z5aOw44Gv5pqX5Y+35YyW44Gv44GE44KL44Go6IGe44GR44Gf44KC44Gu44GY44KD44Gq44GE44Gu44Gn572u44GN5o+b44GI44KLCiAgICAgICAgY29uc3QgbmV3RGF0YSA9IG5ldyBBcnJheUJ1ZmZlcigzKTsKICAgICAgICBjb25zdCBuZXdVaW50OCA9IG5ldyBVaW50OEFycmF5KG5ld0RhdGEpOwogICAgICAgIC8vIE9wdXMg44K144Kk44Os44Oz44K544OV44Os44O844OgCiAgICAgICAgbmV3VWludDguc2V0KFsweGQ4LCAweGZmLCAweGZlXSk7CiAgICAgICAgZW5jb2RlZEZyYW1lLmRhdGEgPSBuZXdEYXRhOwogICAgfQogICAgZWxzZSB7CiAgICAgICAgLy8g5pig5YOP44GM5q2j5bi444GY44KD44Gq44GE44Gf44KBIFBMSSDjgrnjg4jjg7zjg6DjgYznmbrnlJ/jgZfjgabjgZfjgb7jgYYKICAgICAgICAvLyDjgZ3jga7jgZ/jgoEgMzIweDI0MCDjga7nnJ/jgaPpu5LjgarnlLvpnaLjgavnva7jgY3mj5vjgYjjgosKICAgICAgICBjb25zdCBuZXdEYXRhID0gbmV3IEFycmF5QnVmZmVyKDYwKTsKICAgICAgICBjb25zdCBuZXdVaW50OCA9IG5ldyBVaW50OEFycmF5KG5ld0RhdGEpOwogICAgICAgIC8vIHByZXR0aWVyLWlnbm9yZQogICAgICAgIG5ld1VpbnQ4LnNldChbMHhiMCwgMHgwNSwgMHgwMCwgMHg5ZCwgMHgwMSwgMHgyYSwgMHhhMCwgMHgwMCwgMHg1YSwgMHgwMCwKICAgICAgICAgICAgMHgzOSwgMHgwMywgMHgwMCwgMHgwMCwgMHgxYywgMHgyMiwgMHgxNiwgMHgxNiwgMHgyMiwgMHg2NiwKICAgICAgICAgICAgMHgxMiwgMHgyMCwgMHgwNCwgMHg5MCwgMHg0MCwgMHgwMCwgMHhjNSwgMHgwMSwgMHhlMCwgMHg3YywKICAgICAgICAgICAgMHg0ZCwgMHgyZiwgMHhmYSwgMHhkZCwgMHg0ZCwgMHhhNSwgMHg3ZiwgMHg4OSwgMHhhNSwgMHhmZiwKICAgICAgICAgICAgMHg1YiwgMHhhOSwgMHhiNCwgMHhhZiwgMHhmMSwgMHgzNCwgMHhiZiwgMHhlYiwgMHg3NSwgMHgzNiwKICAgICAgICAgICAgMHg5NSwgMHhmZSwgMHgyNiwgMHg5NiwgMHg2MCwgMHhmZSwgMHhmZiwgMHhiYSwgMHhmZiwgMHg0MCwKICAgICAgICBdKTsKICAgICAgICBlbmNvZGVkRnJhbWUuZGF0YSA9IG5ld0RhdGE7CiAgICB9CiAgICByZXR1cm4gZW5jb2RlZEZyYW1lOwp9CmZ1bmN0aW9uIHNldFdyaXRlSVYoY29ubmVjdGlvbklkLCBrZXlJZCwgd3JpdGVJVikgewogICAgY29uc3Qga2V5ID0gW2Nvbm5lY3Rpb25JZCwga2V5SWQudG9TdHJpbmcoKV0uam9pbigiOiIpOwogICAgd3JpdGVJVk1hcC5zZXQoa2V5LCB3cml0ZUlWKTsKfQpmdW5jdGlvbiBnZXRXcml0ZUlWKGNvbm5lY3Rpb25JZCwga2V5SWQpIHsKICAgIGNvbnN0IGtleSA9IFtjb25uZWN0aW9uSWQsIGtleUlkLnRvU3RyaW5nKCldLmpvaW4oIjoiKTsKICAgIHJldHVybiB3cml0ZUlWTWFwLmdldChrZXkpOwp9CmZ1bmN0aW9uIGdlbmVyYXRlSVYoY291bnQsIGNvbm5lY3Rpb25JZCwga2V5SWQpIHsKICAgIC8vIFRPRE86IGtleUlkIOOBjCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiwgNyBieXRlIOOCkui2heOBiOOBpuOBhOOBn+WgtOWQiOOBr+OCqOODqeODvOOBi+S+i+WklgogICAgLy8gVE9ETzogY291bnQg44GMIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLCA3IGJ5dGUg44KS6LaF44GI44Gm44GE44Gf5aC05ZCI44Gv44Ko44Op44O844GL5L6L5aSWCiAgICAvLyAzMiBiaXQg44G+44GnCiAgICBpZiAobWF4S2V5SWQgPCBrZXlJZCB8fCBtYXhDb3VudCA8IGNvdW50KSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJFWENFRURFRC1NQVhJTVVNLUJST0FEQ0FTVElORy1USU1FIik7CiAgICB9CiAgICBjb25zdCB3cml0ZUlWID0gZ2V0V3JpdGVJVihjb25uZWN0aW9uSWQsIGtleUlkKTsKICAgIGlmICghd3JpdGVJVikgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiV1JJVEVJVi1OT1QtRk9VTkQiKTsKICAgIH0KICAgIGNvbnN0IHBhZGRpbmdMZW5ndGggPSBObiAtIFVpbnQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UOwogICAgY29uc3QgY291bnRXaXRoUGFkZGluZ0J1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihObik7CiAgICBjb25zdCBjb3VudFdpdGhQYWRkaW5nRGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoY291bnRXaXRoUGFkZGluZ0J1ZmZlcik7CiAgICBjb3VudFdpdGhQYWRkaW5nRGF0YVZpZXcuc2V0VWludDMyKHBhZGRpbmdMZW5ndGgsIGNvdW50LCBiaWdFbmRpYW4pOwogICAgY29uc3QgaXYgPSBuZXcgVWludDhBcnJheShObik7CiAgICBjb25zdCBjb3VudFdpdGhQYWRkaW5nID0gbmV3IFVpbnQ4QXJyYXkoY291bnRXaXRoUGFkZGluZ0J1ZmZlcik7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IE5uOyBpKyspIHsKICAgICAgICBpdltpXSA9IHdyaXRlSVZbaV0gXiBjb3VudFdpdGhQYWRkaW5nW2ldOwogICAgfQogICAgcmV0dXJuIGl2Owp9CmZ1bmN0aW9uIHBhcnNlUGF5bG9hZChwYXlsb2FkVHlwZSwgcGF5bG9hZCkgewogICAgcmV0dXJuIFsKICAgICAgICBuZXcgVWludDhBcnJheShwYXlsb2FkLCAwLCB1bmVuY3J5cHRlZEJ5dGVzW3BheWxvYWRUeXBlXSksCiAgICAgICAgbmV3IFVpbnQ4QXJyYXkocGF5bG9hZCwgdW5lbmNyeXB0ZWRCeXRlc1twYXlsb2FkVHlwZV0pLAogICAgXTsKfQpmdW5jdGlvbiBlbmNvZGVGcmFtZUFkZChoZWFkZXIsIHNmcmFtZUhlYWRlciwgY29ubmVjdGlvbklkKSB7CiAgICBjb25zdCBjb25uZWN0aW9uSWREYXRhID0gdGV4dEVuY29kZXIuZW5jb2RlKGNvbm5lY3Rpb25JZCk7CiAgICBjb25zdCBmcmFtZUFkZCA9IG5ldyBVaW50OEFycmF5KGhlYWRlci5ieXRlTGVuZ3RoICsgc2ZyYW1lSGVhZGVyLmJ5dGVMZW5ndGggKyBjb25uZWN0aW9uSWREYXRhLmJ5dGVMZW5ndGgpOwogICAgZnJhbWVBZGQuc2V0KGhlYWRlciwgMCk7CiAgICBmcmFtZUFkZC5zZXQoc2ZyYW1lSGVhZGVyLCBoZWFkZXIuYnl0ZUxlbmd0aCk7CiAgICBmcmFtZUFkZC5zZXQoY29ubmVjdGlvbklkRGF0YSwgaGVhZGVyLmJ5dGVMZW5ndGggKyBzZnJhbWVIZWFkZXIuYnl0ZUxlbmd0aCk7CiAgICByZXR1cm4gZnJhbWVBZGQ7Cn0KYXN5bmMgZnVuY3Rpb24gZW5jcnlwdEZ1bmN0aW9uKGVuY29kZWRGcmFtZSwgY29udHJvbGxlcikgewogICAgY29uc3QgeyBjb25uZWN0aW9uSWQsIGtleUlkLCBkZXJpdmVLZXkgfSA9IGdldExhdGVzdFNlbGZEZXJpdmVLZXkoKTsKICAgIGlmICghZGVyaXZlS2V5KSB7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgY29uc3QgY3VycmVudENvdW50ID0gZ2V0Q291bnQoY29ubmVjdGlvbklkKTsKICAgIC8vIGNvdW50IOOBjCAzMiBiaXQg5Lul5LiK44Gu5aC05ZCI44Gv5YGc5q2i44GZ44KLCiAgICBpZiAoY3VycmVudENvdW50ID4gbWF4Q291bnQpIHsKICAgICAgICBwb3N0TWVzc2FnZSh7IHR5cGU6ICJkaXNjb25uZWN0IiB9KTsKICAgIH0KICAgIGNvbnN0IGl2ID0gZ2VuZXJhdGVJVihjdXJyZW50Q291bnQsIGNvbm5lY3Rpb25JZCwga2V5SWQpOwogICAgaWYgKCFpdikgewogICAgICAgIHJldHVybjsKICAgIH0KICAgIGNvbnN0IFtoZWFkZXIsIHBheWxvYWRdID0gcGFyc2VQYXlsb2FkKGVuY29kZWRGcmFtZS50eXBlLCBlbmNvZGVkRnJhbWUuZGF0YSk7CiAgICBjb25zdCBzZnJhbWVIZWFkZXIgPSBlbmNvZGVTRnJhbWVIZWFkZXIoMCwgY3VycmVudENvdW50LCBrZXlJZCk7CiAgICBjb25zdCBmcmFtZUFkZCA9IGVuY29kZUZyYW1lQWRkKGhlYWRlciwgc2ZyYW1lSGVhZGVyLCBjb25uZWN0aW9uSWQpOwogICAgY3J5cHRvLnN1YnRsZQogICAgICAgIC5lbmNyeXB0KHsKICAgICAgICBuYW1lOiAiQUVTLUdDTSIsCiAgICAgICAgaXY6IGl2LAogICAgICAgIC8vIOaal+WPt+WMluOBleOCjOOBpuOBhOOBquOBhOmDqOWIhgogICAgICAgIGFkZGl0aW9uYWxEYXRhOiBmcmFtZUFkZCwKICAgIH0sIGRlcml2ZUtleSwgcGF5bG9hZCkKICAgICAgICAudGhlbigoY2lwaGVyVGV4dCkgPT4gewogICAgICAgIGNvbnN0IG5ld0RhdGEgPSBuZXcgQXJyYXlCdWZmZXIoZnJhbWVBZGQuYnl0ZUxlbmd0aCArIGNpcGhlclRleHQuYnl0ZUxlbmd0aCk7CiAgICAgICAgY29uc3QgbmV3RGF0YVVpbnQ4ID0gbmV3IFVpbnQ4QXJyYXkobmV3RGF0YSk7CiAgICAgICAgbmV3RGF0YVVpbnQ4LnNldChmcmFtZUFkZCwgMCk7CiAgICAgICAgbmV3RGF0YVVpbnQ4LnNldChuZXcgVWludDhBcnJheShjaXBoZXJUZXh0KSwgZnJhbWVBZGQuYnl0ZUxlbmd0aCk7CiAgICAgICAgZW5jb2RlZEZyYW1lLmRhdGEgPSBuZXdEYXRhOwogICAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZShlbmNvZGVkRnJhbWUpOwogICAgfSk7CiAgICBzZXRDb3VudChjb25uZWN0aW9uSWQsIGN1cnJlbnRDb3VudCArIDEpOwp9CmFzeW5jIGZ1bmN0aW9uIGRlY3J5cHRGdW5jdGlvbihlbmNvZGVkRnJhbWUsIGNvbnRyb2xsZXIpIHsKICAgIC8vIOepuuODleODrOODvOODoOWvvuW/nAogICAgaWYgKGVuY29kZWRGcmFtZS5kYXRhLmJ5dGVMZW5ndGggPCAxKSB7CiAgICAgICAgcmV0dXJuOwogICAgfQogICAgdHJ5IHsKICAgICAgICBjb25zdCBmcmFtZU1ldGFkYXRhQnVmZmVyID0gZW5jb2RlZEZyYW1lLmRhdGEuc2xpY2UoMCwgdW5lbmNyeXB0ZWRCeXRlc1tlbmNvZGVkRnJhbWUudHlwZV0pOwogICAgICAgIGNvbnN0IGZyYW1lTWV0YWRhdGEgPSBuZXcgVWludDhBcnJheShmcmFtZU1ldGFkYXRhQnVmZmVyKTsKICAgICAgICBjb25zdCBbc2ZyYW1lSGVhZGVyQnVmZmVyLCBjb25uZWN0aW9uSWRCdWZmZXIsIGVuY3J5cHRlZEZyYW1lQnVmZmVyXSA9IHNwbGl0SGVhZGVyKGVuY29kZWRGcmFtZS5kYXRhLnNsaWNlKHVuZW5jcnlwdGVkQnl0ZXNbZW5jb2RlZEZyYW1lLnR5cGVdKSk7CiAgICAgICAgY29uc3Qgc2ZyYW1lSGVhZGVyID0gbmV3IFVpbnQ4QXJyYXkoc2ZyYW1lSGVhZGVyQnVmZmVyKTsKICAgICAgICBjb25zdCBjb25uZWN0aW9uSWQgPSB0ZXh0RGVjb2Rlci5kZWNvZGUoY29ubmVjdGlvbklkQnVmZmVyKTsKICAgICAgICBjb25zdCBbcywgY291bnQsIGtleUlkXSA9IHBhcnNlU0ZyYW1lSGVhZGVyKHNmcmFtZUhlYWRlckJ1ZmZlcik7CiAgICAgICAgLy8g5LuK5Zue44GvIHMgZmxhZyDjga8gMCDjga7jgb8KICAgICAgICBpZiAocyAhPT0gMCkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlVORVhQRUNURUQtUy1GTEFHIik7CiAgICAgICAgfQogICAgICAgIGNvbnN0IGRlcml2ZUtleSA9IGdldFJlbW90ZURlcml2ZUtleShjb25uZWN0aW9uSWQsIGtleUlkKTsKICAgICAgICBpZiAoIWRlcml2ZUtleSkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGNvbnN0IGl2ID0gZ2VuZXJhdGVJVihjb3VudCwgY29ubmVjdGlvbklkLCBrZXlJZCk7CiAgICAgICAgaWYgKCFpdikgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGNvbnN0IGZyYW1lQWRkID0gZW5jb2RlRnJhbWVBZGQoZnJhbWVNZXRhZGF0YSwgc2ZyYW1lSGVhZGVyLCBjb25uZWN0aW9uSWQpOwogICAgICAgIGNyeXB0by5zdWJ0bGUKICAgICAgICAgICAgLmRlY3J5cHQoewogICAgICAgICAgICBuYW1lOiAiQUVTLUdDTSIsCiAgICAgICAgICAgIGl2OiBpdiwKICAgICAgICAgICAgYWRkaXRpb25hbERhdGE6IGZyYW1lQWRkLAogICAgICAgIH0sIGRlcml2ZUtleSwgbmV3IFVpbnQ4QXJyYXkoZW5jcnlwdGVkRnJhbWVCdWZmZXIpKQogICAgICAgICAgICAudGhlbigocGxhaW5UZXh0KSA9PiB7CiAgICAgICAgICAgIGNvbnN0IG5ld0RhdGEgPSBuZXcgQXJyYXlCdWZmZXIoZnJhbWVNZXRhZGF0YUJ1ZmZlci5ieXRlTGVuZ3RoICsgcGxhaW5UZXh0LmJ5dGVMZW5ndGgpOwogICAgICAgICAgICBjb25zdCBuZXdVaW50OCA9IG5ldyBVaW50OEFycmF5KG5ld0RhdGEpOwogICAgICAgICAgICBuZXdVaW50OC5zZXQobmV3IFVpbnQ4QXJyYXkoZnJhbWVNZXRhZGF0YUJ1ZmZlciwgMCwgdW5lbmNyeXB0ZWRCeXRlc1tlbmNvZGVkRnJhbWUudHlwZV0pKTsKICAgICAgICAgICAgbmV3VWludDguc2V0KG5ldyBVaW50OEFycmF5KHBsYWluVGV4dCksIHVuZW5jcnlwdGVkQnl0ZXNbZW5jb2RlZEZyYW1lLnR5cGVdKTsKICAgICAgICAgICAgZW5jb2RlZEZyYW1lLmRhdGEgPSBuZXdEYXRhOwogICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoZW5jb2RlZEZyYW1lKTsKICAgICAgICB9KTsKICAgIH0KICAgIGNhdGNoIChlKSB7CiAgICAgICAgLy8g5oOz5a6a5aSW44Gu44OR44Kx44OD44OI44OV44Kp44O844Oe44OD44OI44KS5Y+X5L+h44GX44Gf5aC05ZCICiAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHNpbGVuY2VGcmFtZShlbmNvZGVkRnJhbWUpKTsKICAgIH0KfQovKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvdHJpcGxlLXNsYXNoLXJlZmVyZW5jZSAqLwovLy8gPHJlZmVyZW5jZSBwYXRoPSIuL2UyZWUudHMiLz4KLy8gbm9uY2Ug44K144Kk44K6CmNvbnN0IE5uID0gMTI7Ci8vIGtleSDjgrXjgqTjgroKY29uc3QgTmsgPSAxNjsKLy8ga2V5IOOCteOCpOOCuu+8iGJpdO+8iQpjb25zdCBrZXlMZW5ndGggPSBOayAqIDg7CmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlRGVyaXZlS2V5KG1hdGVyaWFsKSB7CiAgICBjb25zdCBzYWx0ID0gdGV4dEVuY29kZXIuZW5jb2RlKCJTRnJhbWUxMCIpOwogICAgY29uc3QgaW5mbyA9IHRleHRFbmNvZGVyLmVuY29kZSgia2V5Iik7CiAgICBjb25zdCBkZXJpdmVLZXkgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmRlcml2ZUtleSh7CiAgICAgICAgbmFtZTogIkhLREYiLAogICAgICAgIHNhbHQ6IHNhbHQsCiAgICAgICAgaGFzaDogIlNIQS0yNTYiLAogICAgICAgIGluZm86IGluZm8sCiAgICB9LCBtYXRlcmlhbCwgewogICAgICAgIG5hbWU6ICJBRVMtR0NNIiwKICAgICAgICBsZW5ndGg6IGtleUxlbmd0aCwKICAgIH0sIGZhbHNlLCBbImVuY3J5cHQiLCAiZGVjcnlwdCJdKTsKICAgIHJldHVybiBkZXJpdmVLZXk7Cn0KYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVXcml0ZUlWKG1hdGVyaWFsKSB7CiAgICBjb25zdCBzYWx0ID0gdGV4dEVuY29kZXIuZW5jb2RlKCJTRnJhbWUxMCIpOwogICAgY29uc3QgaW5mbyA9IHRleHRFbmNvZGVyLmVuY29kZSgic2FsdCIpOwogICAgY29uc3Qgd3JpdGVJVkJ1ZmZlciA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGVyaXZlQml0cyh7CiAgICAgICAgbmFtZTogIkhLREYiLAogICAgICAgIHNhbHQ6IHNhbHQsCiAgICAgICAgaGFzaDogIlNIQS0zODQiLAogICAgICAgIGluZm86IGluZm8sCiAgICB9LCBtYXRlcmlhbCwgCiAgICAvLyBJViDjga8gOTYg44OT44OD44OI44Gq44Gu44GnCiAgICBObiAqIDgpOwogICAgY29uc3Qgd3JpdGVJViA9IG5ldyBVaW50OEFycmF5KHdyaXRlSVZCdWZmZXIpOwogICAgcmV0dXJuIHdyaXRlSVY7Cn0KbGV0IHJlbW92YWxUaW1lb3V0SWQgPSAwOwpvbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHsKICAgIGNvbnN0IHsgdHlwZSB9ID0gZXZlbnQuZGF0YTsKICAgIGlmICh0eXBlID09PSAic2VsZlNlY3JldEtleU1hdGVyaWFsIikgewogICAgICAgIGNvbnN0IHsgc2VsZlNlY3JldEtleU1hdGVyaWFsLCBzZWxmQ29ubmVjdGlvbklkLCBzZWxmS2V5SWQsIHdhaXRpbmdUaW1lIH0gPSBldmVudC5kYXRhOwogICAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBjcnlwdG8uc3VidGxlCiAgICAgICAgICAgICAgICAuaW1wb3J0S2V5KCJyYXciLCBzZWxmU2VjcmV0S2V5TWF0ZXJpYWwuYnVmZmVyLCAiSEtERiIsIGZhbHNlLCBbImRlcml2ZUJpdHMiLCAiZGVyaXZlS2V5Il0pCiAgICAgICAgICAgICAgICAudGhlbigobWF0ZXJpYWwpID0+IHsKICAgICAgICAgICAgICAgIGdlbmVyYXRlRGVyaXZlS2V5KG1hdGVyaWFsKS50aGVuKChkZXJpdmVLZXkpID0+IHsKICAgICAgICAgICAgICAgICAgICBzZXRTZWxmRGVyaXZlS2V5KHNlbGZDb25uZWN0aW9uSWQsIHNlbGZLZXlJZCwgZGVyaXZlS2V5KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZ2VuZXJhdGVXcml0ZUlWKG1hdGVyaWFsKS50aGVuKCh3cml0ZUlWKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgc2V0V3JpdGVJVihzZWxmQ29ubmVjdGlvbklkLCBzZWxmS2V5SWQsIHdyaXRlSVYpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwgd2FpdGluZ1RpbWUgfHwgMCk7CiAgICAgICAgLy8gVE9ETzogKzEwMDAg44Gn6Y2155Sf5oiQ5b6M44Gr5a6f6KGM44GV44KM44KL44KI44GG44Gr44GX44Gm44GE44KL44GM55+t44GE5aC05ZCI44Gv5Ly444Gw44GZCiAgICAgICAgY29uc3QgcmVtb3ZhbFdhaXRpbmdUaW1lID0gKHdhaXRpbmdUaW1lIHx8IDApICsgMTAwMDsKICAgICAgICBpZiAocmVtb3ZhbFRpbWVvdXRJZCkgewogICAgICAgICAgICAvLyDli5XkvZzmuIjjgb/jgr/jgqTjg57jg7zmnInjgooKICAgICAgICAgICAgaWYgKHdhaXRpbmdUaW1lKSB7CiAgICAgICAgICAgICAgICAvLyBjb25uZWN0aW9uLmRlc3Ryb3llZAogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHJlbW92YWxUaW1lb3V0SWQpOwogICAgICAgICAgICAgICAgcmVtb3ZhbFRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJlbW92ZU9sZFJlbW90ZURlcml2ZUtleXMoKTsKICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQocmVtb3ZhbFRpbWVvdXRJZCk7CiAgICAgICAgICAgICAgICAgICAgcmVtb3ZhbFRpbWVvdXRJZCA9IDA7CiAgICAgICAgICAgICAgICB9LCByZW1vdmFsV2FpdGluZ1RpbWUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICAvLyDli5XkvZzmuIjjgb/jgr/jgqTjg57jg7zjgarjgZcKICAgICAgICAgICAgLy8gY29ubmVjdGlvbi5jcmVhdGVkIOOBruWgtOWQiOOCguWwkeOBl+Wun+ihjOOCkumBheOCieOBm+OCiwogICAgICAgICAgICByZW1vdmFsVGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICByZW1vdmVPbGRSZW1vdGVEZXJpdmVLZXlzKCk7CiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQocmVtb3ZhbFRpbWVvdXRJZCk7CiAgICAgICAgICAgICAgICByZW1vdmFsVGltZW91dElkID0gMDsKICAgICAgICAgICAgfSwgcmVtb3ZhbFdhaXRpbmdUaW1lKTsKICAgICAgICB9CiAgICB9CiAgICBlbHNlIGlmICh0eXBlID09PSAicmVtb3RlU2VjcmV0S2V5TWF0ZXJpYWxzIikgewogICAgICAgIGNvbnN0IHsgcmVtb3RlU2VjcmV0S2V5TWF0ZXJpYWxzIH0gPSBldmVudC5kYXRhOwogICAgICAgIGZvciAoY29uc3QgW2Nvbm5lY3Rpb25JZCwgcmVtb3RlU2VjcmV0S2V5TWF0ZXJpYWxdIG9mIE9iamVjdC5lbnRyaWVzKHJlbW90ZVNlY3JldEtleU1hdGVyaWFscykpIHsKICAgICAgICAgICAgY29uc3QgeyBrZXlJZCwgc2VjcmV0S2V5TWF0ZXJpYWwgfSA9IHJlbW90ZVNlY3JldEtleU1hdGVyaWFsOwogICAgICAgICAgICBjcnlwdG8uc3VidGxlCiAgICAgICAgICAgICAgICAuaW1wb3J0S2V5KCJyYXciLCBzZWNyZXRLZXlNYXRlcmlhbC5idWZmZXIsICJIS0RGIiwgZmFsc2UsIFsiZGVyaXZlQml0cyIsICJkZXJpdmVLZXkiXSkKICAgICAgICAgICAgICAgIC50aGVuKChtYXRlcmlhbCkgPT4gewogICAgICAgICAgICAgICAgZ2VuZXJhdGVEZXJpdmVLZXkobWF0ZXJpYWwpLnRoZW4oKGRlcml2ZUtleSkgPT4gewogICAgICAgICAgICAgICAgICAgIHNldFJlbW90ZURlcml2ZUtleShjb25uZWN0aW9uSWQsIGtleUlkLCBkZXJpdmVLZXkpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBnZW5lcmF0ZVdyaXRlSVYobWF0ZXJpYWwpLnRoZW4oKHdyaXRlSVYpID0+IHsKICAgICAgICAgICAgICAgICAgICBzZXRXcml0ZUlWKGNvbm5lY3Rpb25JZCwga2V5SWQsIHdyaXRlSVYpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBzZXRMYXRlc3RSZW1vdGVLZXlJZChjb25uZWN0aW9uSWQsIGtleUlkKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfQogICAgZWxzZSBpZiAodHlwZSA9PT0gInJlbW92ZVJlbW90ZURlcml2ZUtleSIpIHsKICAgICAgICBjb25zdCB7IGNvbm5lY3Rpb25JZCB9ID0gZXZlbnQuZGF0YTsKICAgICAgICByZW1vdmVEZXJpdmVLZXkoY29ubmVjdGlvbklkKTsKICAgIH0KICAgIGVsc2UgaWYgKHR5cGUgPT09ICJlbmNyeXB0IikgewogICAgICAgIGNvbnN0IHsgcmVhZGFibGVTdHJlYW0sIHdyaXRhYmxlU3RyZWFtIH0gPSBldmVudC5kYXRhOwogICAgICAgIGNvbnN0IHRyYW5zZm9ybVN0cmVhbSA9IG5ldyBUcmFuc2Zvcm1TdHJlYW0oewogICAgICAgICAgICB0cmFuc2Zvcm06IGVuY3J5cHRGdW5jdGlvbiwKICAgICAgICB9KTsKICAgICAgICByZWFkYWJsZVN0cmVhbS5waXBlVGhyb3VnaCh0cmFuc2Zvcm1TdHJlYW0pLnBpcGVUbyh3cml0YWJsZVN0cmVhbSk7CiAgICB9CiAgICBlbHNlIGlmICh0eXBlID09PSAiZGVjcnlwdCIpIHsKICAgICAgICBjb25zdCB7IHJlYWRhYmxlU3RyZWFtLCB3cml0YWJsZVN0cmVhbSB9ID0gZXZlbnQuZGF0YTsKICAgICAgICBjb25zdCB0cmFuc2Zvcm1TdHJlYW0gPSBuZXcgVHJhbnNmb3JtU3RyZWFtKHsKICAgICAgICAgICAgdHJhbnNmb3JtOiBkZWNyeXB0RnVuY3Rpb24sCiAgICAgICAgfSk7CiAgICAgICAgcmVhZGFibGVTdHJlYW0ucGlwZVRocm91Z2godHJhbnNmb3JtU3RyZWFtKS5waXBlVG8od3JpdGFibGVTdHJlYW0pOwogICAgfQogICAgZWxzZSBpZiAodHlwZSA9PT0gImNsZWFyIikgewogICAgICAgIGNvdW50TWFwLmNsZWFyKCk7CiAgICAgICAgd3JpdGVJVk1hcC5jbGVhcigpOwogICAgICAgIHJlbW90ZURlcml2ZUtleU1hcC5jbGVhcigpOwogICAgICAgIGxhdGVzdFJlbW90ZUtleUlkTWFwLmNsZWFyKCk7CiAgICAgICAgc2VsZkRlcml2ZUtleU1hcC5jbGVhcigpOwogICAgfQp9Owo=\";\nclass SoraE2EE {\n    constructor() {\n        // 対応しているかどうかの判断\n        // @ts-ignore トライアル段階の API なので無視する\n        const supportsInsertableStreams = !!RTCRtpSender.prototype.createEncodedStreams;\n        if (!supportsInsertableStreams) {\n            throw new Error(\"E2EE is not supported in this browser.\");\n        }\n        this.worker = null;\n        this.onWorkerDisconnect = null;\n    }\n    // worker を起動する\n    startWorker() {\n        // ワーカーを起動する\n        const workerScript = atob(WORKER_SCRIPT);\n        this.worker = new Worker(URL.createObjectURL(new Blob([workerScript], { type: \"application/javascript\" })));\n        this.worker.onmessage = (event) => {\n            const { operation } = event.data;\n            if (operation === \"disconnect\" && typeof this.onWorkerDisconnect === \"function\") {\n                this.onWorkerDisconnect();\n            }\n        };\n    }\n    // worker の掃除をする\n    clearWorker() {\n        if (this.worker) {\n            this.worker.postMessage({\n                type: \"clear\",\n            });\n        }\n    }\n    // worker を終了する\n    terminateWorker() {\n        if (this.worker) {\n            this.worker.terminate();\n        }\n    }\n    // 初期化処理\n    async init() {\n        const { preKeyBundle } = await window.e2ee.init();\n        return preKeyBundle;\n    }\n    setupSenderTransform(sender) {\n        if (!sender.track)\n            return;\n        // @ts-ignore トライアル段階の API なので無視する\n        const senderStreams = sender.createEncodedStreams();\n        const readableStream = senderStreams.readableStream || senderStreams.readable;\n        const writableStream = senderStreams.writableStream || senderStreams.writable;\n        if (!this.worker) {\n            throw new Error(\"Worker is null. Call startWorker in advance.\");\n        }\n        const message = {\n            type: \"encrypt\",\n            readableStream: readableStream,\n            writableStream: writableStream,\n        };\n        this.worker.postMessage(message, [readableStream, writableStream]);\n    }\n    setupReceiverTransform(receiver) {\n        // @ts-ignore トライアル段階の API なので無視する\n        const receiverStreams = receiver.createEncodedStreams();\n        const readableStream = receiverStreams.readableStream || receiverStreams.readable;\n        const writableStream = receiverStreams.writableStream || receiverStreams.writable;\n        if (!this.worker) {\n            throw new Error(\"Worker is null. Call startWorker in advance.\");\n        }\n        const message = {\n            type: \"decrypt\",\n            readableStream: readableStream,\n            writableStream: writableStream,\n        };\n        this.worker.postMessage(message, [readableStream, writableStream]);\n    }\n    postRemoteSecretKeyMaterials(result) {\n        if (!this.worker) {\n            throw new Error(\"Worker is null. Call startWorker in advance.\");\n        }\n        this.worker.postMessage({\n            type: \"remoteSecretKeyMaterials\",\n            remoteSecretKeyMaterials: result.remoteSecretKeyMaterials,\n        });\n    }\n    postRemoveRemoteDeriveKey(connectionId) {\n        if (!this.worker) {\n            throw new Error(\"Worker is null. Call startWorker in advance.\");\n        }\n        this.worker.postMessage({\n            type: \"removeRemoteDeriveKey\",\n            connectionId: connectionId,\n        });\n    }\n    postSelfSecretKeyMaterial(selfConnectionId, selfKeyId, selfSecretKeyMaterial, waitingTime = 0) {\n        if (!this.worker) {\n            throw new Error(\"Worker is null. Call startWorker in advance.\");\n        }\n        this.worker.postMessage({\n            type: \"selfSecretKeyMaterial\",\n            selfConnectionId: selfConnectionId,\n            selfKeyId: selfKeyId,\n            selfSecretKeyMaterial: selfSecretKeyMaterial,\n            waitingTime: waitingTime,\n        });\n    }\n    startSession(connectionId, preKeyBundle) {\n        const [result, err] = window.e2ee.startSession(connectionId, preKeyBundle.identityKey, preKeyBundle.signedPreKey, preKeyBundle.preKeySignature);\n        if (err) {\n            throw err;\n        }\n        return result;\n    }\n    stopSession(connectionId) {\n        const [result, err] = window.e2ee.stopSession(connectionId);\n        if (err) {\n            throw err;\n        }\n        return result;\n    }\n    receiveMessage(message) {\n        const [result, err] = window.e2ee.receiveMessage(message);\n        if (err) {\n            throw err;\n        }\n        return result;\n    }\n    start(selfConnectionId) {\n        const [result, err] = window.e2ee.start(selfConnectionId);\n        if (err) {\n            throw err;\n        }\n        return result;\n    }\n    addPreKeyBundle(connectionId, preKeyBundle) {\n        const err = window.e2ee.addPreKeyBundle(connectionId, preKeyBundle.identityKey, preKeyBundle.signedPreKey, preKeyBundle.preKeySignature);\n        if (err) {\n            throw err;\n        }\n    }\n    selfFingerprint() {\n        return window.e2ee.selfFingerprint();\n    }\n    remoteFingerprints() {\n        return window.e2ee.remoteFingerprints();\n    }\n    static async loadWasm(wasmUrl) {\n        if (!window.e2ee === undefined) {\n            console.warn(\"E2ee wasm is already loaded. Will not be reload.\");\n            return;\n        }\n        WasmExec();\n        if (!window.Go) {\n            throw new Error(`Failed to load module Go. window.Go is ${window.Go}.`);\n        }\n        const go = new Go();\n        const { instance } = await WebAssembly.instantiateStreaming(fetch(wasmUrl), go.importObject);\n        go.run(instance);\n        if (!window.e2ee) {\n            throw new Error(`Failed to load module e2ee. window.e2ee is ${window.e2ee}.`);\n        }\n    }\n    static version() {\n        return \"2021.1.0-canary.0\";\n    }\n    static wasmVersion() {\n        return window.e2ee.version();\n    }\n}\n\nexport default SoraE2EE;\n"],"names":["global","window","self","Error","require","fs","Object","keys","enosys","err","code","outputBuf","constants","O_WRONLY","O_RDWR","O_CREAT","O_TRUNC","O_APPEND","O_EXCL","writeSync","fd","buf","decoder","decode","nl","lastIndexOf","console","log","substr","length","write","offset","position","callback","n","chmod","path","mode","chown","uid","gid","close","fchmod","fchown","fstat","fsync","ftruncate","lchown","link","lstat","mkdir","perm","open","flags","read","buffer","readdir","readlink","rename","from","to","rmdir","stat","symlink","truncate","unlink","utimes","atime","mtime","process","getuid","getgid","geteuid","getegid","getgroups","pid","ppid","umask","cwd","chdir","crypto","nodeCrypto","getRandomValues","b","randomFillSync","performance","now","sec","nsec","hrtime","TextEncoder","TextDecoder","encoder","Go","constructor","argv","env","exit","warn","_exitPromise","Promise","resolve","_resolveExitPromise","_pendingEvent","_scheduledTimeouts","Map","_nextCallbackTimeoutID","setInt64","addr","v","Math","floor","mem","setUint32","getInt64","low","getUint32","high","getInt32","loadValue","f","getFloat64","isNaN","id","_values","storeValue","setFloat64","_ids","get","_idPool","pop","_goRefCounts","set","typeFlag","loadSlice","array","len","Uint8Array","_inst","exports","loadSliceOfValues","a","Array","i","loadString","saddr","DataView","timeOrigin","Date","importObject","go","sp","exited","p","msec","getTime","setInt32","setTimeout","_resume","has","clearTimeout","delete","push","result","Reflect","getsp","deleteProperty","m","args","apply","setUint8","construct","parseInt","str","encode","dst","src","Uint8ClampedArray","toCopy","subarray","value","run","instance","NaN","fill","strPtr","ptr","bytes","argc","argvPtrs","forEach","arg","sort","key","resume","_makeFuncWrapper","event","this","arguments","main","module","versions","electron","error","slice","assign","TMPDIR","tmpdir","WebAssembly","instantiate","readFileSync","then","on","catch","SoraE2EE","supportsInsertableStreams","RTCRtpSender","prototype","createEncodedStreams","worker","onWorkerDisconnect","startWorker","workerScript","atob","Worker","URL","createObjectURL","Blob","type","onmessage","operation","data","clearWorker","postMessage","terminateWorker","terminate","init","preKeyBundle","e2ee","setupSenderTransform","sender","track","senderStreams","readableStream","readable","writableStream","writable","setupReceiverTransform","receiver","receiverStreams","postRemoteSecretKeyMaterials","remoteSecretKeyMaterials","postRemoveRemoteDeriveKey","connectionId","postSelfSecretKeyMaterial","selfConnectionId","selfKeyId","selfSecretKeyMaterial","waitingTime","startSession","identityKey","signedPreKey","preKeySignature","stopSession","receiveMessage","message","start","addPreKeyBundle","selfFingerprint","remoteFingerprints","loadWasm","wasmUrl","WasmExec","instantiateStreaming","fetch","version","wasmVersion"],"mappings":"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"}