import { Callbacks, ConnectionOptions, Encoding, Json, SignalingOfferMessage, SignalingUpdateMessage } from "./types";
import SoraE2EE from "@sora/e2ee";
export default class ConnectionBase {
    role: string;
    channelId: string;
    metadata: Json | undefined;
    signalingUrl: string;
    options: ConnectionOptions;
    constraints: any;
    debug: boolean;
    clientId: string | null;
    connectionId: string | null;
    remoteConnectionIds: string[];
    stream: MediaStream | null;
    authMetadata: Json;
    pc: RTCPeerConnection | null;
    encodings: Encoding[];
    protected ws: WebSocket | null;
    protected callbacks: Callbacks;
    protected e2ee: SoraE2EE | null;
    constructor(signalingUrl: string, role: string, channelId: string, metadata: Json, options: ConnectionOptions, debug: boolean);
    on<T extends keyof Callbacks, U extends Callbacks[T]>(kind: T, callback: U): void;
    disconnect(): Promise<[void, void, void]>;
    protected setupE2EE(): void;
    protected startE2EE(): void;
    protected signaling(offer: RTCSessionDescriptionInit): Promise<SignalingOfferMessage>;
    protected createOffer(): Promise<RTCSessionDescriptionInit>;
    protected connectPeerConnection(message: SignalingOfferMessage): Promise<void>;
    protected setRemoteDescription(message: SignalingOfferMessage | SignalingUpdateMessage): Promise<void>;
    protected createAnswer(message: SignalingOfferMessage | SignalingUpdateMessage): Promise<void>;
    protected sendAnswer(): void;
    protected sendUpdateAnswer(): void;
    protected onIceCandidate(): Promise<void>;
    protected waitChangeConnectionStateConnected(): Promise<void>;
    protected setConnectionTimeout(): Promise<MediaStream>;
    protected trace(title: string, message: unknown): void;
    private update;
    private setSenderParameters;
    private getStats;
    get e2eeSelfFingerprint(): string | undefined;
    get e2eeRemoteFingerprints(): Record<string, string> | undefined;
}
